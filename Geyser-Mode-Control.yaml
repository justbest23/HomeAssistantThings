alias: Control Geyser Based on Mode
description: ""
triggers:
  - entity_id: input_select.geyser_mode
    trigger: state
actions:
  - choose:
      - conditions:
          - condition: state
            entity_id: input_select.geyser_mode
            state: "On"
        sequence:
          - target:
              entity_id: switch.geyser_geyser_onoff
            action: switch.turn_on
            data: {}
          - action: automation.turn_off
            metadata: {}
            data:
              stop_actions: true
            target:
              entity_id: automation.heat_geyser_to_target_temperature_by_target_time
      - conditions:
          - condition: state
            entity_id: input_select.geyser_mode
            state: "Off"
        sequence:
          - target:
              entity_id: switch.geyser_geyser_onoff
            action: switch.turn_off
            data: {}
          - action: automation.turn_off
            metadata: {}
            data:
              stop_actions: true
            target:
              entity_id: automation.heat_geyser_to_target_temperature_by_target_time
      - conditions:
          - condition: state
            entity_id: input_select.geyser_mode
            state: Auto
        sequence:
          - target:
              entity_id: automation.heat_geyser_to_target_temperature_by_target_time
            action: automation.trigger
            data:
              skip_condition: true
          - action: automation.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: automation.heat_geyser_to_target_temperature_by_target_time
